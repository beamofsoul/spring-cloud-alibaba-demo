spring:
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
      config:
        server-addr: ${spring.cloud.nacos.discovery.server-addr}
        # gateway config
        namespace: public
        prefix: ${spring.application.name}
        group: DEFAULT_GROUP
        file-extension: yaml
        # shared configs between services
        shared-configs[0]:
          data-id: data-source.yaml
          refresh: true
    # sentinel config
    sentinel:
      eager: true # disabled lazy-load mod
      transport:
        port: 8719
        dashboard: localhost:8080
#      scg:
#        fallback:
#          mode: response # or redirect
#          response-status: 200
#          response-body: '{"code": 1304, "message": "链路过于繁忙，请稍后重试", "data": null}'
      datasource:
        gw-api-group-data: # config api groups
          nacos:
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            dataId: ${spring.application.name}-apis
            groupId: DEFAULT_GROUP
            rule-type: gw-api-group
        gw-flow-data: # config flow control for specific api groups
          nacos:
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            dataId: ${spring.application.name}-sentinel
            groupId: DEFAULT_GROUP
            rule-type: gw-flow
        gw-degrade-data: # config degrade for specific api groups
          nacos:
            server-addr: ${spring.cloud.nacos.discovery.server-addr}
            dataId: ${spring.application.name}-degrade
            groupId: DEFAULT_GROUP
            rule-type: degrade
  application:
    name: service-gateway
management:
  endpoint:
    web:
      exposure:
        include: "*"
